!function(e,t){e.fn.getCursorPosition=function(){var t=e(this).get(0),n=0;if("selectionStart"in t)n=t.selectionStart;else if("selection"in document){t.focus();var r=document.selection.createRange(),i=document.selection.createRange().text.length;r.moveStart("character",-t.value.length),n=r.text.length-i}return n},e.fn.selectRange=function(e,t){return void 0===t&&(t=e),this.each(function(){if("selectionStart"in this)this.selectionStart=e,this.selectionEnd=t;else if(this.setSelectionRange)this.setSelectionRange(e,t);else if(this.createTextRange){var n=this.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}})}}(jQuery),function(e){var t,n,r=function(){c=navigator.userAgent.search("Chrome"),f=navigator.userAgent.search("Firefox"),m8=navigator.userAgent.search("MSIE 8.0"),m9=navigator.userAgent.search("MSIE 9.0"),c>-1?r="Chrome":f>-1?r="Firefox":m9>-1?r="MSIE 9.0":m8>-1&&(r="MSIE 8.0");return r}(),i=e("#editor"),o="";i.text(""),e(document).on("keypress",function(e){!function(e){let r=i.getCursorPosition();t=!1,n=!1;let c=i.val(),a=function(e){return e.key}(e);o=function(e,t){if(0===t)return"";return e[t-1]}(c,r),a=function(e){let r=e;"."===e?r=function(e){let r=e;" "===o?(r=".",t=!0,n=!0):"A"===o?(r="Ȧ",t=!0):"a"===o?(r="ȧ",t=!0):"C"===o?(r="Ċ",t=!0):"c"===o?(r="ċ",t=!0):"E"===o?(r="Ė",t=!0):"e"===o?(r="ė",t=!0):"G"===o?(r="Ġ",t=!0):"g"===o?(r="ġ",t=!0):"H"===o?(r="Ḥ",t=!0):"h"===o?(r="ḥ",t=!0):"L"===o?(r="Ḷ",t=!0):"l"===o?(r="ḷ",t=!0):"O"===o?(r="Ȯ",t=!0):"o"===o&&(r="ȯ",t=!0);return r}(e):"-"===e?r=function(e){let r=e;" "===o?(r="-",t=!0,n=!1):"A"===o?(r="Ā",t=!0):"a"===o?(r="ā",t=!0):"E"===o?(r="Ē",t=!0):"e"===o?(r="ē",t=!0):"I"===o?(r="Ī",t=!0):"i"===o?(r="ī",t=!0):"O"===o?(r="Ō",t=!0):"o"===o&&(r="ō",t=!0);return r}(e):","===e?r=function(e){let r=e;" "===o?(r=",",t=!0,n=!0):"C"===o?(r="Ç",t=!0):"c"===o?(r="ç",t=!0):"D"===o?(r="Ḑ",t=!0):"d"===o?(r="ḑ",t=!0):"R"===o?(r="Ŗ",t=!0):"r"===o?(r="ŗ",t=!0):"S"===o?(r="Ş",t=!0):"s"===o?(r="ş",t=!0):"T"===o?(r="Ţ",t=!0):"t"===o&&(r="ţ",t=!0);return r}(e):"Enter"===e?r="\n":" "===e&&(r=function(){let e=" ";" "===o&&(e=".",t=!0,n=!0);return e}());return r}(a),c=function(e,r,i){prevText=e.slice(0,i),nextText=e.slice(i),t&&(prevText=prevText.slice(0,-1));n&&(r+=" ");return e=prevText+r+nextText}(c,a,r),i.val(c);let s=r;t&&!n||(s+=1);i.selectRange(s)}(e),"Firefox"==r?i.focus():i.length&&i.scrollTop(i[0].scrollHeight-i.height()),e.preventDefault()})}(window.jQuery);